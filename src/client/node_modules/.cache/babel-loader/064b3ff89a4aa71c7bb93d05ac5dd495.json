{"ast":null,"code":"var _jsxFileName = \"/home/tran/Downloads/ESP32_full/src/client/src/contexts/DataContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer, useState } from \"react\";\nimport { dataReducer } from \"../reducers/dataReducer\";\nimport { url, DATA_LOADED_FAIL, DATA_LOADED_SUCCESS, ADD_DEVICE, STATE_LOADED_FAIL, STATE_LOADED_SUCCESS } from \"./constants\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const DataContext = /*#__PURE__*/createContext();\n\nconst DataContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  //state\n  const [dataState, dispatch] = useReducer(dataReducer, {\n    data: [],\n    dataLoading: true\n  }); //get data\n\n  const getData = async device => {\n    try {\n      const responce = await axios.get(`${url}/data/${configTypeId}`);\n\n      if (responce.data.success) {\n        dispatch({\n          type: DATA_LOADED_SUCCESS,\n          payload: responce.data.getalldata\n        });\n      }\n    } catch (error) {\n      dispatch({\n        type: DATA_LOADED_FAIL\n      });\n    }\n  };\n\n  const getChartData = async () => {\n    try {\n      const responce = await axios.get(`${url}/data/chart`);\n\n      if (responce.data.success) {\n        dispatch({\n          type: DATA_LOADED_SUCCESS,\n          payload: responce.data.getalldata\n        });\n      }\n    } catch (error) {\n      dispatch({\n        type: DATA_LOADED_FAIL\n      });\n    }\n  };\n\n  const getDevice = async device => {\n    try {\n      const responce = await axios.get(`${url}/device`);\n\n      if (responce.data.success) {\n        dispatch({\n          type: DATA_LOADED_SUCCESS,\n          payload: responce.data.getalldata\n        });\n      }\n    } catch (error) {\n      dispatch({\n        type: DATA_LOADED_FAIL\n      });\n    }\n  };\n\n  const addDevices = async newDevice => {\n    try {\n      const response = await axios.post(`${url}/device`, newDevice);\n\n      if (response.data.success) {\n        dispatch({\n          type: ADD_DEVICE,\n          payload: response.data.post\n        });\n        return response.data;\n      }\n    } catch (error) {\n      return error.response.data ? error.response.data : {\n        success: false,\n        message: \"Server error\"\n      };\n    }\n  };\n\n  const dataContextData = {\n    dataState,\n    addDevices,\n    getData,\n    getChartData\n  };\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: dataContextData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DataContextProvider, \"9RC4vE3FBr09zvBgTEwhqv5ksp4=\");\n\n_c = DataContextProvider;\nexport default DataContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataContextProvider\");","map":{"version":3,"sources":["/home/tran/Downloads/ESP32_full/src/client/src/contexts/DataContext.js"],"names":["createContext","useReducer","useState","dataReducer","url","DATA_LOADED_FAIL","DATA_LOADED_SUCCESS","ADD_DEVICE","STATE_LOADED_FAIL","STATE_LOADED_SUCCESS","axios","DataContext","DataContextProvider","children","dataState","dispatch","data","dataLoading","getData","device","responce","get","configTypeId","success","type","payload","getalldata","error","getChartData","getDevice","addDevices","newDevice","response","post","message","dataContextData"],"mappings":"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","sourcesContent":["import { createContext, useReducer, useState } from \"react\";\nimport { dataReducer } from \"../reducers/dataReducer\";\nimport {\n  url,\n  DATA_LOADED_FAIL,\n  DATA_LOADED_SUCCESS,\n  ADD_DEVICE,\n  STATE_LOADED_FAIL,\n  STATE_LOADED_SUCCESS,\n} from \"./constants\";\nimport axios from \"axios\";\n\nexport const DataContext = createContext();\n\nconst DataContextProvider = ({ children }) => {\n  //state\n  const [dataState, dispatch] = useReducer(dataReducer, {\n    data: [],\n    dataLoading: true,\n  });\n\n  //get data\n  const getData = async (device) => {\n    try {\n      const responce = await axios.get(`${url}/data/${configTypeId}`);\n      if (responce.data.success) {\n        dispatch({\n          type: DATA_LOADED_SUCCESS,\n          payload: responce.data.getalldata,\n        });\n      }\n    } catch (error) {\n      dispatch({ type: DATA_LOADED_FAIL });\n    }\n  };\n\n  const getChartData = async () => {\n    try {\n      const responce = await axios.get(`${url}/data/chart`);\n      if (responce.data.success) {\n        dispatch({\n          type: DATA_LOADED_SUCCESS,\n          payload: responce.data.getalldata,\n        });\n      }\n    } catch (error) {\n      dispatch({ type: DATA_LOADED_FAIL });\n    }\n  };\n\n  const getDevice = async (device) => {\n    try {\n      const responce = await axios.get(`${url}/device`);\n      if (responce.data.success) {\n        dispatch({\n          type: DATA_LOADED_SUCCESS,\n          payload: responce.data.getalldata,\n        });\n      }\n    } catch (error) {\n      dispatch({ type: DATA_LOADED_FAIL });\n    }\n  };\n\n  const addDevices = async (newDevice) => {\n    try {\n      const response = await axios.post(`${url}/device`, newDevice);\n      if (response.data.success) {\n        dispatch({\n          type: ADD_DEVICE,\n          payload: response.data.post,\n        });\n        return response.data;\n      }\n    } catch (error) {\n      return error.response.data\n        ? error.response.data\n        : { success: false, message: \"Server error\" };\n    }\n  };\n\n  const dataContextData = {\n    dataState,\n    addDevices,\n    getData,\n    getChartData,\n  };\n  return (\n    <DataContext.Provider value={dataContextData}>\n      {children}\n    </DataContext.Provider>\n  );\n};\nexport default DataContextProvider;\n"]},"metadata":{},"sourceType":"module"}