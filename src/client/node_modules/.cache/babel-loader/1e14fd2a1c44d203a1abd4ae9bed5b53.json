{"ast":null,"code":"var _jsxFileName = \"/home/tran/Downloads/ESP32_full/src/client/src/contexts/DeviceContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer, useState } from \"react\";\nimport { dataReducer } from \"../reducers/dataReducer\";\nimport { url, DEVICE_LOADED_FAIL, DEVICE_LOADED_SUCCESS, ADD_DEVICE } from \"./constants\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const DeviceContext = /*#__PURE__*/createContext();\n\nconst DeviceContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  //state\n  const [deviceState, dispatchDevice] = useReducer(deviceReducer, {\n    device: []\n  }); //get device\n\n  const getDevice = async () => {\n    try {\n      const responce = await axios.get(`${url}/device`);\n\n      if (responce.data.success) {\n        dispatchDevice({\n          type: DEVICE_LOADED_SUCCESS,\n          payload: responce.data.getalldata\n        });\n      }\n    } catch (error) {\n      dispatch({\n        type: DEVICE_LOADED_FAIL\n      });\n    }\n  };\n\n  const addDevices = async newDevice => {\n    try {\n      const response = await axios.post(`${url}/device`, newDevice);\n\n      if (response.data.success) {\n        dispatch({\n          type: ADD_DEVICE,\n          payload: response.data.post\n        });\n        return response.data;\n      }\n    } catch (error) {\n      return error.response.data ? error.response.data : {\n        success: false,\n        message: \"Server error\"\n      };\n    }\n  };\n\n  const deviceContextData = {\n    addDevices,\n    getDevice\n  };\n  return /*#__PURE__*/_jsxDEV(DeviceContext.Provider, {\n    value: deviceContextData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DeviceContextProvider, \"Ed/lvJMmO/aggbpvC1qR3NL1Eb8=\");\n\n_c = DeviceContextProvider;\nexport default DeviceContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeviceContextProvider\");","map":{"version":3,"sources":["/home/tran/Downloads/ESP32_full/src/client/src/contexts/DeviceContext.js"],"names":["createContext","useReducer","useState","dataReducer","url","DEVICE_LOADED_FAIL","DEVICE_LOADED_SUCCESS","ADD_DEVICE","axios","DeviceContext","DeviceContextProvider","children","deviceState","dispatchDevice","deviceReducer","device","getDevice","responce","get","data","success","type","payload","getalldata","error","dispatch","addDevices","newDevice","response","post","message","deviceContextData"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,QAApC,QAAoD,OAApD;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,SACEC,GADF,EAEEC,kBAFF,EAGEC,qBAHF,EAIEC,UAJF,QAKO,aALP;AAMA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,OAAO,MAAMC,aAAa,gBAAGT,aAAa,EAAnC;;AAEP,MAAMU,qBAAqB,GAAG,QAAkB;AAAA;;AAAA,MAAjB;AAAEC,IAAAA;AAAF,GAAiB;AAC9C;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCZ,UAAU,CAACa,aAAD,EAAgB;AAC9DC,IAAAA,MAAM,EAAE;AADsD,GAAhB,CAAhD,CAF8C,CAM9C;;AAEA,QAAMC,SAAS,GAAG,YAAY;AAC5B,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAN,CAAW,GAAEd,GAAI,SAAjB,CAAvB;;AACA,UAAIa,QAAQ,CAACE,IAAT,CAAcC,OAAlB,EAA2B;AACzBP,QAAAA,cAAc,CAAC;AACbQ,UAAAA,IAAI,EAAEf,qBADO;AAEbgB,UAAAA,OAAO,EAAEL,QAAQ,CAACE,IAAT,CAAcI;AAFV,SAAD,CAAd;AAID;AACF,KARD,CAQE,OAAOC,KAAP,EAAc;AACdC,MAAAA,QAAQ,CAAC;AAAEJ,QAAAA,IAAI,EAAEhB;AAAR,OAAD,CAAR;AACD;AACF,GAZD;;AAcA,QAAMqB,UAAU,GAAG,MAAOC,SAAP,IAAqB;AACtC,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAN,CAAY,GAAEzB,GAAI,SAAlB,EAA4BuB,SAA5B,CAAvB;;AACA,UAAIC,QAAQ,CAACT,IAAT,CAAcC,OAAlB,EAA2B;AACzBK,QAAAA,QAAQ,CAAC;AACPJ,UAAAA,IAAI,EAAEd,UADC;AAEPe,UAAAA,OAAO,EAAEM,QAAQ,CAACT,IAAT,CAAcU;AAFhB,SAAD,CAAR;AAIA,eAAOD,QAAQ,CAACT,IAAhB;AACD;AACF,KATD,CASE,OAAOK,KAAP,EAAc;AACd,aAAOA,KAAK,CAACI,QAAN,CAAeT,IAAf,GACHK,KAAK,CAACI,QAAN,CAAeT,IADZ,GAEH;AAAEC,QAAAA,OAAO,EAAE,KAAX;AAAkBU,QAAAA,OAAO,EAAE;AAA3B,OAFJ;AAGD;AACF,GAfD;;AAiBA,QAAMC,iBAAiB,GAAG;AACxBL,IAAAA,UADwB;AAExBV,IAAAA;AAFwB,GAA1B;AAIA,sBACE,QAAC,aAAD,CAAe,QAAf;AAAwB,IAAA,KAAK,EAAEe,iBAA/B;AAAA,cACGpB;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAKD,CAhDD;;GAAMD,qB;;KAAAA,qB;AAiDN,eAAeA,qBAAf","sourcesContent":["import { createContext, useReducer, useState } from \"react\";\nimport { dataReducer } from \"../reducers/dataReducer\";\nimport {\n  url,\n  DEVICE_LOADED_FAIL,\n  DEVICE_LOADED_SUCCESS,\n  ADD_DEVICE,\n} from \"./constants\";\nimport axios from \"axios\";\n\nexport const DeviceContext = createContext();\n\nconst DeviceContextProvider = ({ children }) => {\n  //state\n  const [deviceState, dispatchDevice] = useReducer(deviceReducer, {\n    device: [],\n  });\n\n  //get device\n\n  const getDevice = async () => {\n    try {\n      const responce = await axios.get(`${url}/device`);\n      if (responce.data.success) {\n        dispatchDevice({\n          type: DEVICE_LOADED_SUCCESS,\n          payload: responce.data.getalldata,\n        });\n      }\n    } catch (error) {\n      dispatch({ type: DEVICE_LOADED_FAIL });\n    }\n  };\n\n  const addDevices = async (newDevice) => {\n    try {\n      const response = await axios.post(`${url}/device`, newDevice);\n      if (response.data.success) {\n        dispatch({\n          type: ADD_DEVICE,\n          payload: response.data.post,\n        });\n        return response.data;\n      }\n    } catch (error) {\n      return error.response.data\n        ? error.response.data\n        : { success: false, message: \"Server error\" };\n    }\n  };\n\n  const deviceContextData = {\n    addDevices,\n    getDevice,\n  };\n  return (\n    <DeviceContext.Provider value={deviceContextData}>\n      {children}\n    </DeviceContext.Provider>\n  );\n};\nexport default DeviceContextProvider;\n"]},"metadata":{},"sourceType":"module"}