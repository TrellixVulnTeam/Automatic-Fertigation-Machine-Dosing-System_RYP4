{"ast":null,"code":"var _jsxFileName = \"/home/tran/Downloads/ESP32_full/src/client/src/contexts/ConfigContext.js\",\n    _s = $RefreshSig$();\n\nimport { configReducer } from \"../reducers/configReducer\";\nimport { createContext, useReducer } from \"react\";\nimport { url, ADD_CONFIGDATA, CONFIGDATA_LOADED_SUCCESS, CONFIGDATA_LOADED_FAIL } from \"./constants\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ConfigContext = /*#__PURE__*/createContext();\n\nconst ConfigContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [configState, dispatchConfig] = useReducer(configReducer, {\n    currentConfig: []\n  }); // config data\n\n  const configManual = async newConfig => {\n    try {\n      const response = await axios.post(`${url}/configdata`, newConfig);\n\n      if (response.data.success) {\n        dispatchConfig({\n          type: ADD_CONFIGDATA,\n          payload: response.data.post\n        });\n        return response.data;\n      }\n    } catch (error) {\n      return error.response.data ? error.response.data : {\n        success: false,\n        message: \"Server error\"\n      };\n    }\n  }; //get current config\n\n\n  const getConfigData = async device => {\n    try {\n      const responce = await axios.get(`${url}/configdata/${device}`);\n\n      if (responce.data.success) {\n        dispatchConfig({\n          configData: CONFIGDATA_LOADED_SUCCESS,\n          payload: responce.data.getLastConfigData\n        });\n      }\n    } catch (error) {\n      dispatchConfig({\n        configData: CONFIGDATA_LOADED_FAIL\n      });\n    }\n  };\n\n  const configContextData = {\n    configManual,\n    getConfigData,\n    configState\n  };\n  return /*#__PURE__*/_jsxDEV(ConfigContext.Provider, {\n    value: configContextData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ConfigContextProvider, \"NJlcIEtTg2f8m5h4/93ivy60BYg=\");\n\n_c = ConfigContextProvider;\nexport default ConfigContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConfigContextProvider\");","map":{"version":3,"sources":["/home/tran/Downloads/ESP32_full/src/client/src/contexts/ConfigContext.js"],"names":["configReducer","createContext","useReducer","url","ADD_CONFIGDATA","CONFIGDATA_LOADED_SUCCESS","CONFIGDATA_LOADED_FAIL","axios","ConfigContext","ConfigContextProvider","children","configState","dispatchConfig","currentConfig","configManual","newConfig","response","post","data","success","type","payload","error","message","getConfigData","device","responce","get","configData","getLastConfigData","configContextData"],"mappings":";;;AAAA,SAASA,aAAT,QAA8B,2BAA9B;AACA,SAASC,aAAT,EAAwBC,UAAxB,QAA0C,OAA1C;AACA,SACEC,GADF,EAEEC,cAFF,EAGEC,yBAHF,EAIEC,sBAJF,QAKO,aALP;AAMA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,OAAO,MAAMC,aAAa,gBAAGP,aAAa,EAAnC;;AAEP,MAAMQ,qBAAqB,GAAG,QAAkB;AAAA;;AAAA,MAAjB;AAAEC,IAAAA;AAAF,GAAiB;AAC9C,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCV,UAAU,CAACF,aAAD,EAAgB;AAC9Da,IAAAA,aAAa,EAAE;AAD+C,GAAhB,CAAhD,CAD8C,CAI9C;;AACA,QAAMC,YAAY,GAAG,MAAOC,SAAP,IAAqB;AACxC,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAN,CAAY,GAAEd,GAAI,aAAlB,EAAgCY,SAAhC,CAAvB;;AACA,UAAIC,QAAQ,CAACE,IAAT,CAAcC,OAAlB,EAA2B;AACzBP,QAAAA,cAAc,CAAC;AACbQ,UAAAA,IAAI,EAAEhB,cADO;AAEbiB,UAAAA,OAAO,EAAEL,QAAQ,CAACE,IAAT,CAAcD;AAFV,SAAD,CAAd;AAIA,eAAOD,QAAQ,CAACE,IAAhB;AACD;AACF,KATD,CASE,OAAOI,KAAP,EAAc;AACd,aAAOA,KAAK,CAACN,QAAN,CAAeE,IAAf,GACHI,KAAK,CAACN,QAAN,CAAeE,IADZ,GAEH;AAAEC,QAAAA,OAAO,EAAE,KAAX;AAAkBI,QAAAA,OAAO,EAAE;AAA3B,OAFJ;AAGD;AACF,GAfD,CAL8C,CAsB9C;;;AACA,QAAMC,aAAa,GAAG,MAAOC,MAAP,IAAkB;AACtC,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMnB,KAAK,CAACoB,GAAN,CAAW,GAAExB,GAAI,eAAcsB,MAAO,EAAtC,CAAvB;;AACA,UAAIC,QAAQ,CAACR,IAAT,CAAcC,OAAlB,EAA2B;AACzBP,QAAAA,cAAc,CAAC;AACbgB,UAAAA,UAAU,EAAEvB,yBADC;AAEbgB,UAAAA,OAAO,EAAEK,QAAQ,CAACR,IAAT,CAAcW;AAFV,SAAD,CAAd;AAID;AACF,KARD,CAQE,OAAOP,KAAP,EAAc;AACdV,MAAAA,cAAc,CAAC;AAAEgB,QAAAA,UAAU,EAAEtB;AAAd,OAAD,CAAd;AACD;AACF,GAZD;;AAaA,QAAMwB,iBAAiB,GAAG;AACxBhB,IAAAA,YADwB;AAExBU,IAAAA,aAFwB;AAGxBb,IAAAA;AAHwB,GAA1B;AAKA,sBACE,QAAC,aAAD,CAAe,QAAf;AAAwB,IAAA,KAAK,EAAEmB,iBAA/B;AAAA,cACGpB;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAKD,CA9CD;;GAAMD,qB;;KAAAA,qB;AA+CN,eAAeA,qBAAf","sourcesContent":["import { configReducer } from \"../reducers/configReducer\";\nimport { createContext, useReducer } from \"react\";\nimport {\n  url,\n  ADD_CONFIGDATA,\n  CONFIGDATA_LOADED_SUCCESS,\n  CONFIGDATA_LOADED_FAIL,\n} from \"./constants\";\nimport axios from \"axios\";\n\nexport const ConfigContext = createContext();\n\nconst ConfigContextProvider = ({ children }) => {\n  const [configState, dispatchConfig] = useReducer(configReducer, {\n    currentConfig: [],\n  });\n  // config data\n  const configManual = async (newConfig) => {\n    try {\n      const response = await axios.post(`${url}/configdata`, newConfig);\n      if (response.data.success) {\n        dispatchConfig({\n          type: ADD_CONFIGDATA,\n          payload: response.data.post,\n        });\n        return response.data;\n      }\n    } catch (error) {\n      return error.response.data\n        ? error.response.data\n        : { success: false, message: \"Server error\" };\n    }\n  };\n\n  //get current config\n  const getConfigData = async (device) => {\n    try {\n      const responce = await axios.get(`${url}/configdata/${device}`);\n      if (responce.data.success) {\n        dispatchConfig({\n          configData: CONFIGDATA_LOADED_SUCCESS,\n          payload: responce.data.getLastConfigData,\n        });\n      }\n    } catch (error) {\n      dispatchConfig({ configData: CONFIGDATA_LOADED_FAIL });\n    }\n  };\n  const configContextData = {\n    configManual,\n    getConfigData,\n    configState,\n  };\n  return (\n    <ConfigContext.Provider value={configContextData}>\n      {children}\n    </ConfigContext.Provider>\n  );\n};\nexport default ConfigContextProvider;\n"]},"metadata":{},"sourceType":"module"}